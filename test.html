<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Event Calendar</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- CSV parsing for program integrations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <!-- Load SimpleCalendar Libraries -->
    <script src="simplecalendar.js"></script>
    <script src="data.js"></script>
    <link href="simplecalendar.css" rel="stylesheet">
</head>

<body class="bg-gray-100 font-sans min-h-screen">

    <div id="calendar-app" class="mx-auto p-6 printable-area">
        <!-- Calendar will be rendered here -->
    </div>

    <script>
        async function loadData() {
            //console.log('loading data...');
            return await fetchData();
            console.log(data);
        }


        // --- Sample Data Definition ---
        var sampleEvents = [
            // The requested 3-day event
            {
                id: 4, title: 'Deep Work Session',
                start: '2026-06-01T08:00:00',
                end: '2026-06-01T12:00:00',
                color: '#007bff',
            },
            {
                id: 5, title: 'Deployment Window (Overnight)',
                start: '2026-06-01T10:00:00',
                end: '2026-06-01T12:00:00',
                color: '#fd7e14',
            },
            {
                id: 1, title: 'Annual Project Kick-off Meeting',
                start: '2026-06-01T10:00:00',
                end: '2026-06-01T16:00:00',
                color: '#ffc107',
            },
            {
                id: 2, title: 'Team Sync-up (Concurrent A)',
                start: '2026-06-01T14:30:00',
                end: '2026-06-01T16:00:00',
                color: '#fd7e14',
            },
            {
                id: 3, title: 'UX Review (Concurrent B)',
                start: '2026-06-01T15:00:00',
                end: '2026-06-01T17:00:00',
                color: '#28a745',
            },
        ];
        // --- Initialization ---

        window.onload = async function () {
            const data = await loadData();
            sampleEvents = data;
            //console.log(sampleEvents);
            // Set the initial date to the start date of the 3-day event for demonstration
            const initialDate = '2026-06-01';
            const finalDate = '2026-06-03';
            //window.calendar = new SimpleCalendar('calendar-app', null, sampleEvents);
            window.calendar = new SimpleCalendar(
                'calendar-app',
                sampleEvents,
                {
                    initialDate: initialDate,
                    originalTimezone: 'America/Toronto',
                    userTimezone: "America/Toronto",
                    initialView: 'Day1',
                    slotMinTime: '04:00:00',
                    slotMaxTime: '18:00:00',
                    visibleRange:
                        { start: initialDate, end: finalDate },
                    validRange:
                        { start: initialDate, end: finalDate },
                    hourHeightpx: 250,
                    headerToolbar: { left: 'prev,next', center: 'title', right: 'Day1,Day3' },
                    autoFitEvents:true
                    //views: { Full: { durationDays: 3 } },
                    //eventDidMount: yourHandler,
                    //eventContent: yourRenderer,
                    //datesSet: yourDatesSetHandler
                }
            )
        };
    </script>
</body>

</html>